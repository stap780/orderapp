Заказы(Iorder) через связь has_many through связаны со статусами заказов (Orderstatus). Связующая таблица - Iorderstatus.

Думаю нужно поменять логику по статусам заказов. Сделать таблицу со статусами заказов как в инсалес и сделать таблицу со статусами как нам надо. Соединить таблицы. 

Далее соединить таблицы так чтобы при обновлении заказов в магазин передавались названия статусов таблицы со статусами заказов как в инсалес.
То есть чтобы в iorder.status отображались наши статусы (orderstatus), но при обновлении передавались статусы в магазин как в инсалес. Смысл в том что статусов заказа будет больше чем в инсалес.


_________________


Курьерские службы.
В карточке заказа делаем чекбоксы с выбором типа доставки (логистика, дпд, сами). Создаем модель для каждой службы доставки. Запись в модели создается на основе заказа (думаю надо делать ассоциацию стандартную - has_many belongs_to). 
Далее на основе зиписи по каждой курьерке делается проверка статусов заказов и записывается в базу данных.

Логистика будет состоять из ещё 6 переменных:

Number – номер заказа
State - состояние заказа
OrderStatus – статус заказа
StateDescription – текстовое представление состояния заказа
OrderStatusDescription - текстовое представление статуса заказа
StatusDate – дата и время установки текущего статуса и состояния заказа
ReturnPayment – признак перечисления денежных средств
BarCode - штрихкод


_________________
транслитерация - rb(main):013:0> 
require 'iconv'
Iconv.iconv('ascii//translit', 'utf-8', 'spaß').to_s
=> "spass"
_________________


_________________
 r = RestClient.get ('http://a2e2ed5ba6560944845dbf38f2223298:0e734e3c93ca9795f87313c83c5ebbcf@worksys.myinsales.ru/admin/orders/6161602.json')
 h = JSON.parse(r)
 h["order_lines"]
 h["order_lines"].each do |key, value|
 variantid = key["variant_id"]
 products = Product.find_by_variant_id("#{variantid}")
	@iorder.products << products
 end
 
	

